<h2>✏️ Editar producto</h2>

<div *ngIf="loadingData">Cargando datos…</div>
<div *ngIf="!loadingData">
  <form [formGroup]="form" (ngSubmit)="submit()" class="card">
    <div class="row">
      <label>Nombre <span>*</span></label>
      <input type="text" formControlName="name" placeholder="Ej. Laptop Dell">
      <small class="err" *ngIf="f.name.touched && f.name.invalid">Nombre requerido (mín. 2)</small>
    </div>

    <div class="row">
      <label>Descripción</label>
      <textarea formControlName="description" rows="2" placeholder="Detalles opcionales"></textarea>
    </div>

    <div class="row">
      <label>Código de barras</label>
      <input type="text" formControlName="barcode" placeholder="EAN/UPC (opcional)">
    </div>

    <div class="grid-2">
      <div class="row">
        <label>Precio <span>*</span></label>
        <input type="number" step="0.01" min="0" formControlName="price" placeholder="0.00">
        <small class="err" *ngIf="f.price.touched && f.price.invalid">Precio inválido</small>
      </div>

      <div class="row">
        <label>Stock <span>*</span></label>
        <input type="number" min="0" formControlName="stock" placeholder="0">
        <small class="err" *ngIf="f.stock.touched && f.stock.invalid">Stock inválido</small>
      </div>
    </div>

    <div class="footer">
      <a class="btn" routerLink="/productos">⬅ Volver</a>
      <button class="btn btn-primary" type="submit" [disabled]="loading || form.invalid">
        {{ loading ? 'Guardando…' : 'Guardar cambios' }}
      </button>
    </div>

    <div class="err" *ngIf="error">{{ error }}</div>
  </form>
</div>